export class MersenneTwister{constructor(t){if(t==undefined){t=(new Date).getTime()}this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=new Array(this.N);this.mti=this.N+1;if(typeof t==="string"){this.init_string(t)}else if(t.constructor==Array){this.init_by_array(t,t.length)}else{this.init_seed(t)}}init_seed(t){this.mt[0]=t>>>0;for(this.mti=1;this.mti<this.N;this.mti++){var t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((t&4294901760)>>>16)*1812433253<<16)+(t&65535)*1812433253+this.mti;this.mt[this.mti]>>>=0}}init_by_array(t,i){var s,h,r;this.init_seed(19650218);s=1;h=0;r=this.N>i?this.N:i;for(;r;r--){var n=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(((n&4294901760)>>>16)*1664525<<16)+(n&65535)*1664525)+t[h]+h;this.mt[s]>>>=0;s++;h++;if(s>=this.N){this.mt[0]=this.mt[this.N-1];s=1}if(h>=i)h=0}for(r=this.N-1;r;r--){var n=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(((n&4294901760)>>>16)*1566083941<<16)+(n&65535)*1566083941)-s;this.mt[s]>>>=0;s++;if(s>=this.N){this.mt[0]=this.mt[this.N-1];s=1}}this.mt[0]=2147483648}random_int(){var t;var i=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var s;if(this.mti==this.N+1)this.init_seed(5489);for(s=0;s<this.N-this.M;s++){t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK;this.mt[s]=this.mt[s+this.M]^t>>>1^i[t&1]}for(;s<this.N-1;s++){t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK;this.mt[s]=this.mt[s+(this.M-this.N)]^t>>>1^i[t&1]}t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^i[t&1];this.mti=0}t=this.mt[this.mti++];t^=t>>>11;t^=t<<7&2636928640;t^=t<<15&4022730752;t^=t>>>18;return t>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){var t=this.random_int()>>>5,i=this.random_int()>>>6;return(t*67108864+i)*(1/9007199254740992)}init_string(i){let s=Array(i.length);for(let t=0;t<i.length;t++){s[t]=i.charCodeAt(t)}this.init_by_array(s,s.length)}random_float(){return this.random_incl()}ranged_random(t,i){if(typeof t!=="number"||typeof i!=="number")throw new TypeError("random_int invalid arguments");t=Math.floor(t);i=Math.floor(i);if(t>=i)throw new RangeError("random_int arguments out of range");let s=this.random_float();let h=i-t+1;return t+Math.floor(s*h)}}export default MersenneTwister;